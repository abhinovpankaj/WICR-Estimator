<!--Style="{StaticResource wnd-metro}"-->
<Window x:Class="WICR_Estimator.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WICR_Estimator"
        xmlns:myVM="clr-namespace:WICR_Estimator.ViewModels"
        xmlns:myViews="clr-namespace:WICR_Estimator.Views"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
        mc:Ignorable="d"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"    
        Icon="Images\WICR Logo.ico"
        
        Loaded="Window_Loaded" Closing="Window_Closing"
        WindowState="{Binding CurWindowState,Mode=TwoWay}" WindowStartupLocation="CenterScreen" 
        Visibility="Visible" WindowStyle="None">
    <Window.Resources>
        <DataTemplate DataType="{x:Type myVM:HomeViewModel}">
            <myViews:HomePage />
        </DataTemplate>
        <DataTemplate DataType="{x:Type myVM:ProjectViewModel}">
            <myViews:SelectedProjectsPage />
        </DataTemplate>
        <Storyboard x:Key="CloseMenu">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" 
                                           Storyboard.TargetName="GridMenu">
                <EasingDoubleKeyFrame KeyTime="0" Value="250"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" 
                                           Storyboard.TargetName="GridBackground">
                <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="1"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Key="OpenMenu">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" 
                                           Storyboard.TargetName="GridMenu">
                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="250"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" 
                                           Storyboard.TargetName="GridBackground">
                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="1"/>
                
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>

    </Window.Resources>
    <Window.Triggers>
        <EventTrigger RoutedEvent="ButtonBase.Click" SourceName="ButtonClose">
            <BeginStoryboard x:Name="CloseMenu_BeginStoryBoard" Storyboard="{StaticResource CloseMenu}"/>
        </EventTrigger>
        <EventTrigger RoutedEvent="ButtonBase.Click" SourceName="ButtonMenu">
            <BeginStoryboard x:Name="OpenMenu_BeginStoryBoard" Storyboard="{StaticResource OpenMenu}"/>
        </EventTrigger>
    </Window.Triggers>
    <!--<dragablz:TabablzControl>
        <dragablz:TabablzControl.InterTabController>
            <dragablz:InterTabController />
        </dragablz:TabablzControl.InterTabController>
        
        
        <TabItem Header="Create Estimates">
            <Grid>
                -->
    <!--<Grid.Background>
            <VisualBrush>
                <VisualBrush.Visual>
                    <Image Source="Images/wicr_bg.png" Margin="0,220,0,0" Width="50">
                        <Image.BitmapEffect>
                            <BlurBitmapEffect KernelType="Gaussian" Radius="2" />
                        </Image.BitmapEffect>
                    </Image>
                </VisualBrush.Visual>
            </VisualBrush>
        </Grid.Background>-->
    <!--
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>

                </Grid.RowDefinitions>
                <DockPanel LastChildFill="True">
                    <ContentControl Content="{Binding CurrentPageViewModel}" 
                        DockPanel.Dock="Top"/>
                </DockPanel>
                <Border BorderBrush="Black"
                 Grid.Row="1"
                BorderThickness="0,0,0,0">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="10" Color="#82000000" />
                    </Border.Effect>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <ItemsControl ItemsSource="{Binding PageViewModels}" 
                          >
                            <ItemsControl.ItemTemplate>

                                <DataTemplate>
                                    <WrapPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center">
                                        <Button
                                Command="{Binding DataContext.ChangePageCommand,
                                RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                                CommandParameter="{Binding }"
                                Margin="2,5"
                                Width="100"
                                Height="30">
                                            <Button.Content>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock FontFamily="Segoe UI Symbol" FontSize="16"
                                                       VerticalAlignment="Center">
                                                        <TextBlock.Style>
                                                            <Style TargetType="{x:Type TextBlock}">
                                                                <Setter Property="Text" Value="test"/>
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding Name}" Value="Home" >
                                                                        <Setter Property="Text" Value="&#xE10F;"/>
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding Name}" Value="Projects" >
                                                                        <Setter Property="Text" Value="&#xE12A;"/>
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </TextBlock.Style>
                                                    </TextBlock>
                                                    -->
    <!--<materialDesign:PackIcon VerticalAlignment="Center">
                                                        <materialDesign:PackIcon.Style>
                                                            <Style TargetType="{x:Type materialDesign:PackIcon}">
                                                                <Setter Property="Kind" Value="BatterySaver"/>
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding Name}" Value="Home" >
                                                                        <Setter Property="Kind" Value="Home"/>
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding Name}" Value="Projects" >
                                                                        <Setter Property="Kind" Value="Domain"/>
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </materialDesign:PackIcon.Style>
                                                        
                                                    </materialDesign:PackIcon>-->
    <!--
                                                    <TextBlock Text="{Binding Name}" Margin="5,0,0,0"
                                                       VerticalAlignment="Center"/>
                                                </StackPanel>
                                            </Button.Content>
                                        </Button>
                                    </WrapPanel>

                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <VirtualizingStackPanel HorizontalAlignment="Center"
                            Orientation="Horizontal" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                        <Button x:Name="Save" Width="100"
                        HorizontalAlignment="Right"
                        Margin="2,5"
                        
                        Command="{Binding DataContext.SaveEstimateCommand,
                        RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                        CommandParameter="{Binding }">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    -->
    <!--<TextBlock Text="&#xE105;" FontFamily="Segoe UI Symbol" FontSize="16"
                                       VerticalAlignment="Center"/>-->
    <!--
                                    <materialDesign:PackIcon Kind="ContentSaveAll" VerticalAlignment="Center"/>
                                    <TextBlock Text="Save" Margin="10,0,0,0"
                                       VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button.Content>
                        </Button>
                    </StackPanel>

                </Border>

            </Grid>
        </TabItem>
        <TabItem Header="Update Cost">
            <TabItem.Content>
                <local:MaterialDetailsPage/>
            </TabItem.Content>
        </TabItem>
    </dragablz:TabablzControl>-->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid x:Name="GridBackground" Opacity="1" Grid.Row="1">
            <Grid.Background>
                <ImageBrush ImageSource="Images/WICR Logo.ico" TileMode="Tile" Opacity="0.1"/>
            </Grid.Background>
            <DockPanel LastChildFill="True">
                <ContentControl Content="{Binding CurrentPageViewModel}" 
                        DockPanel.Dock="Top"/>
            </DockPanel>
        </Grid>
        <Grid Background="{StaticResource ProgressBrush}">
            <Button x:Name="ButtonMenu"
                        VerticalAlignment="Top"
                        HorizontalAlignment="Left"
                        Background="{x:Null}"
                        Height="30"
                        Width="30"
                Padding="0"
                        BorderBrush="{x:Null}">
                <materialDesign:PackIcon Kind="Menu" 
                                     Foreground="{StaticResource SecondaryAccentForegroundBrush}"/>
            </Button>
            <materialDesign:PopupBox HorizontalAlignment="Right" Margin="0,0,80,0"
                                     Content="Actions">
                <StackPanel Width="150">
                    <Button x:Name="Home"
                        Command="{Binding DataContext.ChangePageCommand,
                        RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                        CommandParameter="{Binding PageViewModels[0]}">
                        <Button.Content>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Home" VerticalAlignment="Center"/>
                                <TextBlock Text="Home" Margin="10,0,0,0"
                                       VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button.Content>
                    </Button>

                    <Button x:Name="Projects"
                        Command="{Binding DataContext.ChangePageCommand,
                        RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                        CommandParameter="{Binding PageViewModels[1]}">
                        <Button.Content>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="OfficeBuilding" VerticalAlignment="Center"/>
                                <TextBlock Text="Projects" Margin="10,0,0,0"
                                       VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button.Content>
                    </Button>
                    <Separator/>
                    <Button x:Name="Save"
                        Command="{Binding DataContext.SaveEstimateCommand,
                        RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                        CommandParameter="{Binding }">
                        <Button.Content>
                            <StackPanel Orientation="Horizontal">
                                  <materialDesign:PackIcon Kind="ContentSaveAll" VerticalAlignment="Center"/>
                                    <TextBlock Text="Save" Margin="10,0,0,0"
                                       VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button.Content>
                        </Button>
                    
                </StackPanel>
                
            </materialDesign:PopupBox>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right"
                    >
                <Button x:Name="ButtonMin"
                        VerticalAlignment="Top"
                        HorizontalAlignment="Right"
                        Background="{x:Null}"
                        Height="30"
                        Width="30"
                        Padding="0"
                    Command="{Binding DataContext.MinimizeCommand,
                                RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                                CommandParameter="{Binding }"
                        BorderBrush="{x:Null}">
                    <materialDesign:PackIcon Kind="WindowMinimize" Foreground="{StaticResource SecondaryAccentForegroundBrush}"/>
                </Button>
                <Button x:Name="ButtonExit"
                        VerticalAlignment="Top"
                        HorizontalAlignment="Right"
                        Background="{x:Null}"
                        Height="30"
                        Width="30"
                Padding="0"
                    Command="{Binding DataContext.CloseCommand,
                                RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                                CommandParameter="{Binding }"
                        BorderBrush="{x:Null}">
                    <materialDesign:PackIcon Kind="Close" Foreground="Red"/>
                </Button>
            </StackPanel>
        </Grid>
        

        <Grid x:Name="GridMenu" Width="250" 
              Grid.RowSpan="2"
              RenderTransformOrigin="0.5,0.5"
              HorizontalAlignment="Left" Margin="-250,0,0,0">
            <Grid.Background>
                <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                    <GradientStop Color="#FF00F9FF" Offset="1"/>
                    <GradientStop Color="#FF0CADEA" Offset="0.119"/>
                </LinearGradientBrush>
            </Grid.Background>
            <Grid.RenderTransform>
                <TransformGroup>
                    <ScaleTransform/>
                    <SkewTransform/>
                    <RotateTransform/>
                    <TranslateTransform/>
                </TransformGroup>
            </Grid.RenderTransform>
            <StackPanel>
                <Button x:Name="ButtonClose"
                        VerticalAlignment="Top"
                        HorizontalAlignment="Right"
                        Width="30"
                        Padding="0"
                        Height="30"                      
                        Background="{x:Null}"
                        BorderBrush="{x:Null}">
                    <materialDesign:PackIcon Kind="Close" 
                                             Foreground="{StaticResource AccentColorBrush}"/>
                </Button>
                <Image Height="140" Source="Images/WICR Logo.ico" Stretch="Uniform">

                </Image>
                <ListView x:Name="MenuList" FontSize="18" Margin="0,10,0,0"
                           >
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonUp">
                            <i:InvokeCommandAction Command="{Binding NavigationCommand}"
                                                   CommandParameter="{Binding ElementName=MenuList, Path=SelectedItem}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <ListViewItem Height="55" Padding="0" x:Name="Estimates">
                       
                            <StackPanel Orientation="Horizontal" Margin="10,0">
                                <materialDesign:PackIcon Foreground="{StaticResource AccentColorBrush}"
                                                     
                                                     VerticalAlignment="Center"
                                                     Margin="5"
                                Kind="CreateOutline"/>
                                <TextBlock Text="Create Estimate" Margin="10"/>
                            </StackPanel>
                       
                        
                    </ListViewItem>
                    <ListViewItem Height="45" Padding="0" x:Name="ProjectList">
                        <StackPanel Orientation="Horizontal" Margin="10,0">
                            <materialDesign:PackIcon Width="20" Foreground="{StaticResource AccentColorBrush}"
                                                     Height="20"
                                                     VerticalAlignment="Center"
                                                     Margin="5"
                                Kind="OfficeBuilding"/>
                            <TextBlock Text="Projects" Margin="10"/>
                        </StackPanel>
                    </ListViewItem>
                    <ListViewItem Height="45" Padding="0" x:Name="Login">
                        <StackPanel Orientation="Horizontal" Margin="10,0">
                            <materialDesign:PackIcon Width="20" Foreground="{StaticResource HighlightBrush}"
                                                     Height="20"
                                                     VerticalAlignment="Center"
                                                     Margin="5"
                                Kind="Login"/>
                            <TextBlock Text="Login" Margin="10"/>
                        </StackPanel>
                    </ListViewItem>
                    <ListViewItem Height="45" Padding="0" x:Name="Prices">
                        <StackPanel Orientation="Horizontal" Margin="10,0">
                            <materialDesign:PackIcon Width="20" Foreground="Gold"
                                                     Height="20"
                                                     VerticalAlignment="Center"
                                                     Margin="5"
                                Kind="Dollar"/>
                            <TextBlock Text="Manage Prices" Margin="10"/>
                        </StackPanel>
                    </ListViewItem>
                </ListView>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
